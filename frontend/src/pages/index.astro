---
import { fetchApi, getStrapiMedia } from '../lib/strapi';
import Layout from '../layouts/Layout.astro';
import HeroLoop from '../components/Home/HeroLoop.jsx';

const homepage = await fetchApi({ 
	endpoint: 'homepage',
	wrappedByKey: 'data' 
});

const images = homepage.heroGallery;

const imagesWithUrls = images.map(image => ({
    ...image,
    url: getStrapiMedia(image.url)
}));
---
<Layout title="Home">
   <HeroLoop
    client:only="react" 
    images={imagesWithUrls} 
  />
</Layout>
